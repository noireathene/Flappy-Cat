if (self.CavalryLogger) { CavalryLogger.start_js(["UqSy8NC"]); }

__d("VideoPlayerCea608Command",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({TEXT:"text",PAC:"pac",MIDROW:"midrow",CARRIAGE_RETURN:"carriage_return",START_ROLL_UP_2:"start_roll_up_2",START_ROLL_UP_3:"start_roll_up_3",START_ROLL_UP_4:"start_roll_up_4",END_OF_CAPTION:"end_of_caption",ERASE_DISPLAY_MEMORY:"erase_display_memory",ERASE_NON_DISPLAY_MEMORY:"erase_non_display_memory",BACKSPACE:"backspace",DELETE_TIL_END_OF_ROW:"delete_til_end_of_row",RESUME_DIRECT_CAPTIONING:"resume_direct_captioning",RESUME_CAPTION_LOADING:"resume_caption_loading",TAB_OFFSET:"tab_offset",FLASH_ON:"flash_on",__DEPRECATED__ALARM_OFF:"alarm_off",__DEPRECATED__ALARM_ON:"alarm_on",__DEPRECATED__TEXT_RESTART:"text_restart",__DEPRECATED__RESUME_TEXT_DISPLAY:"resume_text_display"});b=a;e.exports=b}),null);
__d("extractCEA608",["JSResource"],(function(a,b,c,d,e,f){e.exports=a;var g=null;function a(a){g||(g=b("JSResource")("CEA608Extractor").__setRef("extractCEA608").load());return g.then(function(b){return b.extract(a)})}a.prepare=function(){return}}),null);
__d("VideoPlayerCea608CaptionsSourceImplFacebook",["VideoPlayerCea608Command","emptyFunction","extractCEA608","gkx"],(function(a,b,c,d,e,f){"use strict";var g=!1;a=b("emptyFunction");var h=15,i=32,j=function(){function a(){this.$2=0;this.$1=new Array(i);for(var a=0;a<i;++a)this.$1[a]=" "}var b=a.prototype;b.setPos=function(a){this.$2=Math.max(0,Math.min(i-1,a))};b.movePos=function(a){a=this.$2+a;this.setPos(a)};b.backspace=function(){this.movePos(-1),this.$1[this.$2]=" "};b.putCharacter=function(a){var b=this.$2;b<i&&(this.$1[b]=a,this.movePos(1))};b.clearFromPos=function(a){for(var a=a;a<i;a++)this.$1[a]=" "};b.clear=function(){this.clearFromPos(0),this.$2=0};b.clearToEndOfRow=function(){this.clearFromPos(this.$2)};b.getCharacters=function(){return this.$1};b.getPos=function(){return this.$2};return a}(),k=function(){function a(){this.$2=h-1;this.$3=null;this.$1=new Array(h);for(var a=0;a<h;++a)this.$1[a]=new j()}var b=a.prototype;b.clear=function(){this.$1.forEach(function(a,b){a.clear()})};b.setPAC=function(a){var b=a.row-1;this.$3!=null&&b<this.$3-1&&(b=this.$3-1);this.$2=b;b=this.$1[this.$2];a.indent!==null&&b.setPos(a.indent)};b.putCharacter=function(a){var b=this.$1[this.$2];b.putCharacter(a)};b.movePos=function(a){var b=this.$1[this.$2];b.movePos(a)};b.setRollupSize=function(a){this.$3=a};b.rollup=function(){if(this.$3==null)return;var a=this.$2+1-this.$3;a=this.$1.splice(a,1)[0];a.clear();this.$1.splice(this.$2,0,a)};b.backspace=function(){this.$1[this.$2].backspace()};b.clearToEndOfRow=function(){this.$1[this.$2].clearToEndOfRow()};b.getRows=function(){return this.$1.slice()};b.getCurrentRowIndex=function(){return this.$2};return a}();function l(a){return a.getRows().map(function(a){return a.getCharacters().join("")})}function m(a){var b=a.getCurrentRowIndex();return"\n"+a.getRows().map(function(a,c){var d=a.getPos();return String(c+1).padStart(3," ")+" ["+a.getCharacters().join("")+"]"+(c===b?"< ":"  ")+String(d).padStart(2," ")}).join("\n")+"\n"}var n=function(){function a(){}var c=a.prototype;c.handleCommand=function(a,c,d){switch(a.type){case b("VideoPlayerCea608Command").TEXT:d.putCharacter(a.data.character);return!1;case b("VideoPlayerCea608Command").TAB_OFFSET:d.movePos(a.data.tabOffset);return!1;case b("VideoPlayerCea608Command").CARRIAGE_RETURN:return!1;case b("VideoPlayerCea608Command").BACKSPACE:d.backspace();return!1;case b("VideoPlayerCea608Command").DELETE_TIL_END_OF_ROW:d.clearToEndOfRow();return!1;case b("VideoPlayerCea608Command").ERASE_DISPLAY_MEMORY:c.clear();return!0;case b("VideoPlayerCea608Command").ERASE_NON_DISPLAY_MEMORY:d.clear();return!1;case b("VideoPlayerCea608Command").PAC:d.setPAC(a.data.pacData);return!1;default:return!1}};return a}(),o=function(){function a(){}var c=a.prototype;c.handleCommand=function(a,c,d){switch(a.type){case b("VideoPlayerCea608Command").TEXT:c.putCharacter(a.data.character);return!0;case b("VideoPlayerCea608Command").TAB_OFFSET:c.movePos(a.data.tabOffset);return!1;case b("VideoPlayerCea608Command").CARRIAGE_RETURN:return!1;case b("VideoPlayerCea608Command").BACKSPACE:c.backspace();return!0;case b("VideoPlayerCea608Command").DELETE_TIL_END_OF_ROW:c.clearToEndOfRow();return!0;case b("VideoPlayerCea608Command").ERASE_DISPLAY_MEMORY:c.clear();return!0;case b("VideoPlayerCea608Command").PAC:c.setPAC(a.data.pacData);return!1;default:return!1}};return a}(),p=function(){function a(){}var c=a.prototype;c.handleCommand=function(a,b,c){return this.$1(a,b,c)};c.$1=function(a,c,d){switch(a.type){case b("VideoPlayerCea608Command").TEXT:c.putCharacter(a.data.character);return!0;case b("VideoPlayerCea608Command").TAB_OFFSET:c.movePos(a.data.tabOffset);return!1;case b("VideoPlayerCea608Command").CARRIAGE_RETURN:c.rollup();return!0;case b("VideoPlayerCea608Command").BACKSPACE:c.backspace();return!0;case b("VideoPlayerCea608Command").DELETE_TIL_END_OF_ROW:c.clearToEndOfRow();return!0;case b("VideoPlayerCea608Command").ERASE_DISPLAY_MEMORY:c.clear();return!0;case b("VideoPlayerCea608Command").ERASE_NON_DISPLAY_MEMORY:d.clear();return!1;case b("VideoPlayerCea608Command").PAC:c.setPAC(a.data.pacData);return!1;default:return!1}};return a}();c=function(){function a(a){var b=a.onCaptionsLoaded;a=a.onCaptionsChanged;this.$1=null;this.$2=null;this.$3=[];this.$4=null;this.$5=new k();this.$6=new k();this.$7=new n();this.$8=null;this.$9=null;this.$10={changedCount:0,commandsHandledCount:0,fragmentsInsertedCount:0,fragmentsProcessedCount:0,processStartedCount:0,processedCount:0,timeUpdateHandledCount:0};this.$1=b;this.$2=a}var c=a.prototype;c.appendFragments_DEPRECATED=function(a){this.$11(a)};c.processBytes=function(a){var c=this;this.$10.processStartedCount++;return b("extractCEA608")({debugLogEnabled:g,timescale:a.timescale,videoBytes:a.videoBytes}).then(function(a){c.$10.processedCount++,c.$11(a)})};c.handleTimeUpdate=function(a){this.$12(a)};c.getStagingScreenForTestSnapshot=function(){return m(this.$6)};c.getDisplayScreenForTestSnapshot=function(){return m(this.$5)};c.getCurrentScreenRepresentation=function(){return{rows:this.$8,styles:this.$9}};c.destroy=function(){this.$1=null,this.$2=null,this.$3.length=0,this.$4=null,this.$5.clear(),this.$6.clear(),this.$8=null,this.$9=null,this.$10={changedCount:0,commandsHandledCount:0,fragmentsInsertedCount:0,fragmentsProcessedCount:0,processStartedCount:0,processedCount:0,timeUpdateHandledCount:0}};c.$11=function(a){var b=this,c=this.$1;c&&(c(),this.$1=null);a.forEach(function(a){var c=a.presentationTime,d;for(d=b.$3.length;d>0;d--){var e=d===b.$3.length?Number.MAX_VALUE:b.$3[d].presentationTime,f=b.$3[d-1].presentationTime;if(c<e&&c>=f)break}b.$10.fragmentsInsertedCount++;b.$3.splice(d,0,a)})};c.$12=function(a){this.$10.timeUpdateHandledCount++;if(!this.$3.length||this.$3[0].presentationTime>a)return;var c=0,d=!1;for(;c<this.$3.length;++c){var e=this.$3[c];if(e.presentationTime>a)break;this.$10.fragmentsProcessedCount++;if(this.$4!=null&&(e.type!==b("VideoPlayerCea608Command").TEXT||e.data.isSpecial===!0)&&JSON.stringify(e)===JSON.stringify(this.$4))continue;this.$4=e;e=this.$13(e);e&&(d=!0);this.$10.commandsHandledCount++}this.$3.splice(0,c);this.$14(l(this.$5),{textAlignment:this.$15(this.$7)})};c.$13=function(a){switch(a.type){case b("VideoPlayerCea608Command").RESUME_CAPTION_LOADING:this.$7=new n();return!1;case b("VideoPlayerCea608Command").RESUME_DIRECT_CAPTIONING:this.$7=new o();this.$5=this.$6;this.$6=new k();return!0;case b("VideoPlayerCea608Command").END_OF_CAPTION:if(this.$7 instanceof n){var c=this.$6;this.$6=this.$5;this.$5=c;return!0}return!1;case b("VideoPlayerCea608Command").START_ROLL_UP_2:this.$5.setRollupSize(2);this.$7=new p();return!1;case b("VideoPlayerCea608Command").START_ROLL_UP_3:this.$5.setRollupSize(3);this.$7=new p();return!1;case b("VideoPlayerCea608Command").START_ROLL_UP_4:this.$5.setRollupSize(4);this.$7=new p();return!1}c=this.$7.handleCommand(a,this.$5,this.$6);return c};c.$15=function(a){if(a instanceof n)return"center";else if(a instanceof o)return"center";else if(a instanceof p)return"left";else return"center"};c.$14=function(a,b){if(this.$8==null||this.$8.length!==a.length||this.$8.some(function(b,c){return b!==a[c]})){this.$10.changedCount++;var c=this.$2;c&&c(a,b)}this.$8=a;this.$9=b};return a}();e.exports=c}),null);
__d("VideoPlayerCea608CaptionsSource",["VideoPlayerCea608CaptionsSourceImplFacebook"],(function(a,b,c,d,e,f){"use strict";a=b("VideoPlayerCea608CaptionsSourceImplFacebook");e.exports=a}),null);